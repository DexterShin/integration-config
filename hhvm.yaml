# vim: set et ts=2 sw=2:

# Build hhvm from master daily
- job:
    name: hhvm-hourly-build
    node: hhvm-build

    triggers:
      - timed: '@hourly'

    scm:
      - git:
          url: 'https://github.com/facebook/hhvm'
          branches:
            - 'master'
          wipe-workspace: false
          clean: true

    wrappers:
      - timeout:
          timeout: 90 # minutes
          fail: true
      - timestamps
      - ansicolor

    builders:
      - shell: |
          cmake .
          make -j4
          cp "$WORKSPACE/hphp/hhvm/hhvm" /data/project/hhvm-builds/hhvm
          cp "$WORKSPACE/hphp/hhvm/hhvm" "/data/project/hhvm-builds/hhvm-$GIT_COMMIT"
